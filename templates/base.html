<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}TailSentry{% endblock %}</title>
  <link rel="stylesheet" href="/static/tailwind.min.css">
  <link rel="stylesheet" href="/static/dark-mode-addon.css">
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
  <script src="/static/alpine-focus.min.js" defer></script>
  <script src="/static/dashboard.js" defer></script>
  <script src="/static/alpine.min.js" defer></script>
  <script>
    // Expose CSRF token to inline forms if present in request.state
  window.__CSRF_TOKEN__ = "{{ request.state.csrf_token if request.state.csrf_token is defined else request.cookies.get('csrf_token', '') }}";
  </script>
  {% block head %}{% endblock %}
</head>
<body x-data="window.dashboard()" :class="{ 'dark': darkMode }" class="min-h-screen bg-gray-50 dark:bg-gray-900">
  <!-- Main Navigation -->
  <nav class="flex items-center justify-between px-6 py-4 bg-indigo-700 text-white shadow" role="navigation" aria-label="Main Navigation">
    <div class="flex items-center gap-3">
      <img src="/static/favicon.svg" class="h-8 w-8" alt="TailSentry logo">
      <span class="font-bold text-xl tracking-tight">TailSentry</span>
    </div>
    <div class="flex items-center gap-4">
      <a href="/" class="hover:bg-indigo-800 px-3 py-1 rounded transition {% if active_nav == 'dashboard' %}bg-indigo-900 font-semibold{% endif %}" aria-label="Dashboard" title="Dashboard">Dashboard</a>
  {% if user and user.role == 'admin' %}
  <a href="/settings" class="hover:bg-indigo-800 px-3 py-1 rounded transition {% if active_nav == 'settings' %}bg-indigo-900 font-semibold{% endif %}" aria-label="Settings" title="Settings">Settings</a>
  {% endif %}
      <a href="/profile" class="hover:bg-indigo-800 px-3 py-1 rounded transition flex items-center {% if active_nav == 'profile' %}bg-indigo-900 font-semibold{% endif %}" aria-label="Profile" title="Profile">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
        Profile
      </a>
      <button @click="logout()" class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded" aria-label="Logout" title="Logout">Logout</button>
    </div>
  </nav>
  <main>
    {% block content %}{% endblock %}
  </main>
  {% block scripts %}{% endblock %}
</body>
</html>
